<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>筆記 on Revol.C 雷歐</title><link>https://revolc.blog/notes/</link><description>Recent content in 筆記 on Revol.C 雷歐</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Thu, 22 May 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://revolc.blog/notes/index.xml" rel="self" type="application/rss+xml"/><item><title>把專輯數字前綴拿掉</title><link>https://revolc.blog/notes/remove-file-prefix/</link><pubDate>Thu, 22 May 2025 00:00:00 +0000</pubDate><guid>https://revolc.blog/notes/remove-file-prefix/</guid><description/><content:encoded>&lt;h2 id="需求">需求
&lt;/h2>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">* 01 GFRIEND - Intro (Belief).mp3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">* 02 GFRIEND - Love Whisper.mp3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">* ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">* 10 GFRIEND - Summer Rain (Instrumental).mp3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">⬇
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">* GFRIEND - Intro (Belief).mp3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">* GFRIEND - Love Whisper.mp3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">* ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">* GFRIEND - Summer Rain (Instrumental).mp3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="實作">實作
&lt;/h2>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> f in *.mp3&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span> mv &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$f&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$f&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> sed &lt;span class="s1">&amp;#39;s/^[0-9][0-9] //&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>for f in *.mp3&lt;/code>：對目前資料夾下所有 &lt;code>.mp3&lt;/code> 檔案進行迴圈（&lt;code>f&lt;/code> 就是每個檔名）。&lt;/li>
&lt;li>&lt;code>do ... done&lt;/code>：這是 bash 的迴圈語法，&lt;code>do&lt;/code> 裡面會對每個檔案執行一次命令。&lt;/li>
&lt;li>&lt;code>mv 舊檔名 新檔名&lt;/code>：把「舊檔名」改成「新檔名」。&lt;/li>
&lt;li>&lt;code>echo &amp;quot;$f&amp;quot;&lt;/code>：把 &lt;code>$f&lt;/code> 印出來，例如某次 &lt;code>$f&lt;/code> 是 &lt;code>&amp;quot;01 GFRIEND – Love Whisper.mp3&amp;quot;&lt;/code>。&lt;/li>
&lt;li>&lt;code>|&lt;/code> 是管線，代表把 &lt;code>echo &amp;quot;$f&amp;quot;&lt;/code> 的輸出交給 &lt;code>sed&lt;/code> 處理。&lt;/li>
&lt;li>&lt;code>sed&lt;/code> 是文字處理工具。&lt;/li>
&lt;li>&lt;code>'s/^[0-9][0-9] //'&lt;/code> 的意思是把 &lt;code>01 &lt;/code>、&lt;code>02 &lt;/code> 替代為「空白」：
&lt;ul>
&lt;li>&lt;code>舊字串//新字串&lt;/code>：把「舊字串」取代為「新字串」。&lt;/li>
&lt;li>&lt;code>s/&lt;/code>：substitue，替代。&lt;/li>
&lt;li>&lt;code>^&lt;/code>：字串開頭。&lt;/li>
&lt;li>&lt;code>[0-9][0-9] &lt;/code>：任意兩個數字 + 一個空白&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>最後會跑的程式是像這樣：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">mv &lt;span class="m">01&lt;/span> GFRIEND - Intro &lt;span class="o">(&lt;/span>Belief&lt;span class="o">)&lt;/span>.mp3 GFRIEND - Intro &lt;span class="o">(&lt;/span>Belief&lt;span class="o">)&lt;/span>.mp3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv &lt;span class="m">02&lt;/span> GFRIEND - Love Whisper.mp3 GFRIEND - Love Whisper.mp3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv &lt;span class="m">03&lt;/span> GFRIEND - Summer Rain.mp3 GFRIEND - Summer Rain.mp3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv &lt;span class="m">04&lt;/span> GFRIEND - Rainbow.mp3 GFRIEND - Rainbow.mp3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv &lt;span class="m">05&lt;/span> GFRIEND - Ave Maria.mp3 GFRIEND - Ave Maria.mp3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv &lt;span class="m">06&lt;/span> GFRIEND - One-Half.mp3 GFRIEND - One-Half.mp3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv &lt;span class="m">07&lt;/span> GFRIEND - Life Is a Party.mp3 GFRIEND - Life Is a Party.mp3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv &lt;span class="m">08&lt;/span> GFRIEND - Red Umbrella.mp3 GFRIEND - Red Umbrella.mp3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv &lt;span class="m">09&lt;/span> GFRIEND - Falling Asleep Again.mp3 GFRIEND - Falling Asleep Again.mp3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv &lt;span class="m">10&lt;/span> GFRIEND - Summer Rain &lt;span class="o">(&lt;/span>Instrumental&lt;span class="o">)&lt;/span>.mp3 GFRIEND - Summer Rain &lt;span class="o">(&lt;/span>Instrumental&lt;span class="o">)&lt;/span>.mp3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></content:encoded></item><item><title>怎麼下載 StreetVoice 的音樂？</title><link>https://revolc.blog/notes/download-streetvoice-music/</link><pubDate>Thu, 22 May 2025 00:00:00 +0000</pubDate><guid>https://revolc.blog/notes/download-streetvoice-music/</guid><description/><content:encoded>&lt;h2 id="streetvoice-怎麼播放音樂">StreetVoice 怎麼播放音樂？
&lt;/h2>&lt;ul>
&lt;li>一首三分鐘的歌曲，會被拆成大約 10 秒一段的 &lt;code>.ts&lt;/code> 檔案。&lt;/li>
&lt;li>系統會產生一個 &lt;code>.m3u8&lt;/code> 播放清單，裡面寫好每段音樂的順序。&lt;/li>
&lt;li>播放器就會照著清單，一段一段把 &lt;code>.ts&lt;/code> 播起來，聽起來就像一首完整的歌。&lt;/li>
&lt;li>我們可以使用 &lt;code>ffmpeg&lt;/code>這個終端機工具，透過 &lt;code>.m3u8&lt;/code> 把這些段落抓下來，接起來，就能下載整首歌了。&lt;/li>
&lt;/ul>
&lt;h2 id="下載流程">下載流程
&lt;/h2>&lt;ol>
&lt;li>打開開發者工具，點選 Network，並在搜尋欄搜尋「&lt;code>m3u8&lt;/code>」。&lt;/li>
&lt;li>播放音樂，這時候開發者工具應該會跳出一項。&lt;/li>
&lt;li>複製那一項的 Request URL，大概會長得像這樣：&lt;code>https://akhls.streetvoice.com/xxx.m3u8&lt;/code>。&lt;/li>
&lt;li>在終端機輸入：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">ffmpeg -headers &lt;span class="s2">&amp;#34;Referer: https://streetvoice.com/&amp;#34;&lt;/span> -i &lt;span class="s2">&amp;#34;https://akhls.streetvoice.com/xxx.m3u8&amp;#34;&lt;/span> -c copy &lt;span class="s2">&amp;#34;歌名.mp3&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>-headers &amp;quot;Referer: https://streetvoice.com/&amp;quot;&lt;/code>：告訴瀏覽器，我是從 StreetVoice 上面下載的。&lt;/li>
&lt;/ul>
&lt;h2 id="m3u8-是什麼">m3u8 是什麼？
&lt;/h2>&lt;p>它裡面不包含「音樂檔案」，而是一個純文字的播放清單檔案，告訴系統要播放的音樂順序，以及每首音樂有多久。&lt;/p>
&lt;p>簡單來說就像：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">1. 歌曲長度 3 分鐘，播放檔案：周杰倫 - 楓.mp3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2. 歌曲長度 4 分鐘，播放檔案：kobasolo, 春茶 - Love letter.mp3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3. ...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>稍微貼近真實情況的例子：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">1. 歌曲長度 10.004900 秒，播放檔案：eTGgeuMAuxms7DtfjmuYo2.mp3.128khls.mp3-00001.ts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2. 歌曲長度 10.004900 秒，播放檔案：eTGgeuMAuxms7DtfjmuYo2.mp3.128khls.mp3-00002.ts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3. ...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>實際打開某個 &lt;code>.m3u8&lt;/code> 長這樣：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">#EXTM3U
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#EXT-X-VERSION:3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#EXT-X-TARGETDURATION:11
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#EXT-X-MEDIA-SEQUENCE:1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#EXTINF:10.004900,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">eTGgeuMAuxms7DtfjmuYo2.mp3.128khls.mp3-00001.ts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#EXTINF:10.004900,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">eTGgeuMAuxms7DtfjmuYo2.mp3.128khls.mp3-00002.ts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#EXTINF:10.004889,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">eTGgeuMAuxms7DtfjmuYo2.mp3.128khls.mp3-00003.ts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#EXTINF:10.004900,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">eTGgeuMAuxms7DtfjmuYo2.mp3.128khls.mp3-00004.ts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#EXT-X-ENDLIST
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></content:encoded></item><item><title>FFmpeg</title><link>https://revolc.blog/notes/ffmpeg/</link><pubDate>Sat, 17 May 2025 00:00:00 +0000</pubDate><guid>https://revolc.blog/notes/ffmpeg/</guid><description/><content:encoded>&lt;h2 id="mp4-to-mp3">mp4 to mp3
&lt;/h2>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">ffmpeg -i input.mp4 -q:a &lt;span class="m">0&lt;/span> -map a output.mp3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>-i&lt;/code>：Input 輸入檔案&lt;/li>
&lt;li>&lt;code>-q:a 0&lt;/code>：音質最好（quality, audio）
&lt;ul>
&lt;li>0：最高音質 / 2：高音質 / 4：正常音質 / 6：低音質&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>-map a&lt;/code>：只選擇音訊（audio）&lt;/li>
&lt;/ul>
&lt;h2 id="wav-to-mp3">wav to mp3
&lt;/h2>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">ffmpeg -i input.wav -c:a libmp3lame -b:a 192k output.mp3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="webm-to-mp3">webm to mp3
&lt;/h2>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">ffmpeg -i vwMYtCgohX0.f251.webm -q:a &lt;span class="m">4&lt;/span> -vn brave.mp3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>-i&lt;/code>：Input 輸入檔案&lt;/li>
&lt;li>&lt;code>-q:a 4&lt;/code>：正常音質（quality, audio）
&lt;ul>
&lt;li>0：最高音質，2：高音質，6：低音質&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>-vn&lt;/code>：不要輸出視訊（因為你只要音訊）&lt;/li>
&lt;/ul>
&lt;h2 id="裁剪音樂">裁剪音樂
&lt;/h2>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">ffmpeg -ss 00:39:50 -to 02:07:00 -i &lt;span class="s2">&amp;#34;原影片.mp4&amp;#34;&lt;/span> -c copy &lt;span class="s2">&amp;#34;剪輯完.mp4&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>-ss&lt;/code>：start time，開始時間&lt;/li>
&lt;li>&lt;code>-to&lt;/code>：to time，結束時間&lt;/li>
&lt;li>&lt;code>-i&lt;/code>：input，你要輸入的檔案&lt;/li>
&lt;li>&lt;code>-c&lt;/code>：codec，指定使用的編碼器&lt;/li>
&lt;li>&lt;code>copy&lt;/code>：不重新壓縮讀取，直接複製整個音訊跟影片，並進行剪輯&lt;/li>
&lt;/ul>
&lt;p>不只可以用 &lt;code>.mp4&lt;/code>，&lt;code>.mp3&lt;/code> 等的音樂檔也可以用同樣格式。&lt;/p>
&lt;h2 id="下載-streetvoice-音樂">下載 StreetVoice 音樂
&lt;/h2>&lt;p>&lt;a class="link" href="../download-streetvoice-music" >點此連結&lt;/a>。&lt;/p>
&lt;h2 id="將所有-wma-轉成-mp3">將所有 &lt;code>.wma&lt;/code> 轉成 &lt;code>.mp3&lt;/code>。
&lt;/h2>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">find . -iname &lt;span class="s1">&amp;#39;*.wma&amp;#39;&lt;/span> -exec sh -c &lt;span class="s1">&amp;#39;ffmpeg -i &amp;#34;$1&amp;#34; -q:a 0 &amp;#34;${1%.wma}.mp3&amp;#34;&amp;#39;&lt;/span> sh &lt;span class="o">{}&lt;/span> &lt;span class="se">\;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">find . -iname &lt;span class="s1">&amp;#39;*.wav&amp;#39;&lt;/span> -exec sh -c &lt;span class="s1">&amp;#39;ffmpeg -i &amp;#34;$1&amp;#34; -q:a 0 &amp;#34;${1%.wav}.mp3&amp;#34;&amp;#39;&lt;/span> sh &lt;span class="o">{}&lt;/span> &lt;span class="se">\;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">find . -iname &lt;span class="s1">&amp;#39;*.wav&amp;#39;&lt;/span> -exec sh -c &lt;span class="s1">&amp;#39;ffmpeg -i &amp;#34;$1&amp;#34; &amp;#34;${1%.wav}.mp3&amp;#34;&amp;#39;&lt;/span> sh &lt;span class="o">{}&lt;/span> &lt;span class="se">\;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>find .&lt;/code>：&lt;code>.&lt;/code> 代表當前目錄，&lt;code>find&lt;/code> 會在這裡開始搜索。&lt;/li>
&lt;li>&lt;code>-iname '*.wma'&lt;/code>：尋找所有擴展名為 &lt;code>.wma&lt;/code> 的檔案，不區分大小寫。&lt;/li>
&lt;li>&lt;code>-exec sh -c '...' sh {} \;&lt;/code>：對於每個找到的檔案，&lt;code>find&lt;/code> 命令會執行指定的 &lt;code>sh -c&lt;/code> 命令。這裡，&lt;code>sh -c&lt;/code> 允許我們執行一個小的 shell 腳本。&lt;/li>
&lt;li>&lt;code>&amp;quot;ffmpeg -i &amp;quot;$1&amp;quot; -q:a 0 &amp;quot;${1%.wma}.mp3&amp;quot;&lt;/code>：&lt;code>$1&lt;/code> 是由 &lt;code>find&lt;/code> 傳入的檔案路徑（&lt;code>{}&lt;/code> 的位置），&lt;code>${1%.wma}.mp3&lt;/code> 使用 shell 的參數替換功能來將檔案名的 &lt;code>.wma&lt;/code> 替換為 &lt;code>.mp3&lt;/code>。&lt;/li>
&lt;li>&lt;code>-q:a 0&lt;/code>：這是 ffmpeg 的選項，用來指定最高的音質。&lt;/li>
&lt;/ul></content:encoded></item><item><title>RSS</title><link>https://revolc.blog/notes/rss/</link><pubDate>Sat, 17 May 2025 00:00:00 +0000</pubDate><guid>https://revolc.blog/notes/rss/</guid><description/><content:encoded>&lt;p>rss&lt;/p></content:encoded></item><item><title>弦樂編寫</title><link>https://revolc.blog/notes/strings/</link><pubDate>Sat, 17 May 2025 00:00:00 +0000</pubDate><guid>https://revolc.blog/notes/strings/</guid><description/><content:encoded>&lt;p>Aim Strings&lt;/p></content:encoded></item></channel></rss>